<?php

?>

<p>
The Java code snippet below shows how to add a number to a subscription service using our API. 
</p>

<p>
The code uses our Java gateway class: <strong>AfricasTalkingGateway.java</strong> <span class="download_link">[<a href='/smslibraries/java'><i class="ti-download" ></i>  Download</a>]</span>
</p>

<p>
To help decode JSON responses, you will need to add one of the available JAVA libraries as a dependency.
For this tutorial we chose to use <strong>json-20090211.jar</strong> which you can 
<a href = 'http://mvnrepository.com/artifact/org.json/json/20090211'>download from this repository</a>. 
The  documentation on this library 
<a href='http://www.json.org/javadoc/org/json/package-summary.html'>can be found here</a>. 
</p>
// Make sure the downloaded jar file is in the classpath
public class CreateSubscription {

	public static void main(String[] args) 
	{
		
	//Specify your credentials
	String username = "myAfricasTalkingUsername";
	String apiKey   = "myAfricasTalkingAPIKey";
		
	// Specify the number that you want to subscribe
	// Please ensure you include the country code (+254 for Kenya in this case)
	String subscriptionPhoneNumber   = "+254711YYYZZZ";
	
	//Specify your Africa's Talking short code and keyword
	String shortCode = "myAfricasTalkingShortCode";
	String keyword   = "myAfricasTalkingKeyword";
		
	//Create an instance of our awesome gateway class and pass your credentials
	AfricasTalkingGateway gateway = new AfricasTalkingGateway(username, apiKey);
		
		// Thats it, submit data and we'll take care of the rest. Any errors will
  // be captured in the Exception class as shown below
   
   try {
    JSONObject result = gateway.createSubscription(subscriptionPhoneNumber, shortCode, keyword);
    
    //Only status Success signifies the subscription was successfully
    System.out.println(result.getString("status"));
    System.out.println(result.getString("description"));
   }
   catch(Exception e){
   	System.out.println(e.getMessage());
   }
 }
}
