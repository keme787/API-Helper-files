<?php

?>

<p>
The CSharp code snippet below shows how to make a call using our API. 
</p>

<p>
The code uses our CSharp gateway class: <strong>AfricasTalkingGateway.cs</strong> <span class="download_link">[<a href='/smslibraries/csharp'><i class="ti-download" ></i>  Download</a>]</span>
</p>

<p>
We use the Javascript serializer to encode and decode data so be sure to add <strong>System.Web.Extensions</strong> and 
 <strong>System.Microsoft.CSharp</strong> as your referenced libraries in you project.
</p>

<fieldset style="width:98%;" class='boxed code'>
<pre class="csharpCode">
using System;

class MainClass
{
	
	static public void testCalling ()
	{
		// Specify your login credentials
		string username = "MyAfricasTalking_Username";
		string apiKey   = "MyAfricasTalking_APIKey"; 
		
		// Specify your Africa's Talking phone number in international format
		string from = "+254711082XYZ";
		
		// Specify the numbers that you want to call to in a comma-separated list
		// Please ensure you include the country code (+254 for Kenya in this case)
		string to   = "+254711XXXYYY,+254733YYYZZZ";

		// Create a new instance of our awesome gateway class
		AfricasTalkingGateway gateway = new AfricasTalkingGateway (username, apiKey);

		// Any gateway error will be captured by our custom Exception class below,
		// so wrap the call in a try-catch block          
		try {

			gateway.call(from, to);
			Console.WriteLine ("Calls have been initiated. Time for song and dance!");
			
			// Our API will now contact your callback URL once the recipient answers the call!   

		} catch (AfricasTalkingGatewayException e) {

			Console.WriteLine ("Encountered an error: " + e.Message);		

		}
	}
}
</pre>
</fieldset>